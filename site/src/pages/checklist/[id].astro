---
import { getCollection } from 'astro:content';
import Layout from '../../layouts/Layout.astro';
import Checklist from '../../components/Checklist.astro';
import { ArrowLeft } from 'lucide-astro';

export async function getStaticPaths() {
  const checklists = await getCollection('checklists');
  return checklists.map(entry => ({
    params: { id: entry.id },
    props: { entry },
  }));
}

const base = import.meta.env.BASE_URL;
const withBase = (path = "") => `${base}${path.replace(/^\//, "")}`;

const { entry } = Astro.props;
---

<Layout title={entry.data.title}>
     <div class="sticky top-0 bg-white/90 backdrop-blur-md border-b border-gray-100 z-40 px-4 py-4 flex items-center">
        <a href={withBase('tools')} class="p-2 -ml-2 text-slate-700 hover:text-gray-900 transition-colors">
            <ArrowLeft size={24} />
        </a>
        <span class="ml-2 font-semibold text-gray-800">{entry.data.title}</span>
    </div>

    <div class="p-6 pb-24">
        <div class="mb-6">
            <p class="text-slate-800 text-lg leading-relaxed font-medium">Use this checklist to prepare. Your progress is saved automatically on this device.</p>
        </div>

        <Checklist checklist={entry.data} />
    </div>
</Layout>
